<h2>Checkups for
  <% if @environment %>
    <%= link_to "#{@environment.site.name} #{@environment.name}", site_environment_path(@environment.site, @environment) %>
  <% else %>
    all environments
  <% end %>
</h2>

<%= form_tag request.path, :method => 'get' do %>
  <p>
    <%= label_tag 'healthy' %>
    <%= select_tag 'healthy', options_for_select([['false', '0'], ['true', '1']], @filters[:healthy]), :include_blank => true %>
    <%= submit_tag "Filter", :name => nil %>
  </p>
<% end %>

<%= paginate @checkups %>

<table>
  <tr>
    <th>Site</th>
    <th>Environment</th>
    <th>Healthy</th>
    <th>Name lookup time</th>
    <th>Start transfer time</th>
    <th>Total time</th>
    <th>Downloaded bytes</th>
    <th>Retries used</th>
    <th>Error</th>
    <th>Performed on</th>
    <th></th>
  </tr>

<% @checkups.each do |checkup| %>
  <tr class='<%= checkup.healthy? ? 'healthy' : 'not-healthy' %>'>
    <td><%= checkup.environment.site.name %></td>
    <td><%= checkup.environment.name %></td>
    <td><%= checkup.healthy %></td>
    <td><%= checkup.name_lookup_time %></td>
    <td><%= checkup.start_transfer_time %></td>
    <td><%= checkup.total_time %></td>
    <td><%= checkup.downloaded_bytes %></td>
    <td><%= checkup.retries_used %></td>
    <td><%= checkup.error %></td>
    <td><%= checkup.performed_on %></td>
    <td><%= link_to 'Show', checkup %></td>
  </tr>
<% end %>
</table>
